<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="author" content="Luis Miguel F. <https://lmfresneda.github.io>"> 
    <link rel="canonical" href="https://loggerage.github.io/reference/query_system/"> 
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Query System - loggerage</title>

    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">


    <link href="../../css/extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">loggerage</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../index_reference/">Index Reference</a>
</li>

                        
                            
<li class="active">
    <a href="./">Query System</a>
</li>

                        
                            
<li >
    <a href="../stored_loggers/">Stored loggers</a>
</li>

                        
                            
<li >
    <a href="../options/">Options</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../contributing/">Contributing</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../changelog/">Changelog</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../license/">License</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../index_reference/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../stored_loggers/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/lmfresneda/loggerage">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#query_system">Query System</a></li>
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="query_system">Query System</h2>
<p>You can get the log by applying a filter. In the default localStorage, the log is return filtered by the query. In the custom storages, the query is passed in second parameter of <code>getItem</code> method, <strong>only if a query is required</strong>. Example of query:</p>
<pre><code class="javascript">const { Loggerage, LoggerageLevel } = require(&quot;loggerage&quot;);

const logger = new Loggerage(&quot;MY-APP&quot;);
logger.info('Info log');
logger.debug('Debug log');
const log = logger.level(LoggerageLevel.INFO).getLog();

// log = [{ level: 'INFO', level_number: 3, message: 'Info log' ... }];
</code></pre>

<p>These query system also apply for the <code>getLogAsync</code> method.</p>
<p><strong>Query methods</strong>:</p>
<ul>
<li><code>.from( from: Moment|Date|string|number, dateStringFormat?: string )</code>:</li>
<li><code>.to( from: Moment|Date|string|number, dateStringFormat?: string )</code>:</li>
</ul>
<p>From and To methods, receives one of <code>Moment|Date|string|number</code> type, and if the date is passed in <code>string</code> type, we can provide a <a href="https://momentjs.com/docs/#/parsing/string-format/"><em>moment</em> format</a>. The format by default for string dates is <code>YYYY-MM-DD HH:mm:ss.SSS</code>. Number is a unix timestamp (in <a href="https://momentjs.com/docs/#/parsing/unix-timestamp-milliseconds/">milliseconds</a>)</p>
<ul>
<li><code>.version( version: number|string )</code>:</li>
</ul>
<p>Recieve the version of app or logger. Remember that diferents loggers can be with the same name, but different version.</p>
<ul>
<li><code>.level( level: LoggerageLevel|LoggerageLevel[] )</code>:</li>
</ul>
<p>Recieve one or some levels to filter.</p>
<ul>
<li><code>.app( app: string )</code>:</li>
</ul>
<p>Recieve the app or logger name. It's mainly made for custom storages, because with the default localStorage, the log is filtered by app name always.</p>
<p><strong>Complete example</strong>:</p>
<pre><code class="javascript">const { Loggerage, LoggerageLevel, LoggerageOptions } = require(&quot;loggerage&quot;);

const opt1 = new LoggerageOptions();
opt1.version = '1.0';
const opt2 = new LoggerageOptions();
opt2.version = '2.0';

const logger1 = new Loggerage(&quot;MY-APP&quot;, opt1);
const logger2 = new Loggerage(&quot;MY-APP&quot;, opt2);

logger1.info('Info log 1');   // LOGGER 1
logger1.info('Info log 2');   // LOGGER 1
logger1.debug('Debug log 1'); // LOGGER 1

// after 5 seconds

logger1.debug('Debug log 2'); // LOGGER 1
logger2.info('Info log 2');   // LOGGER 2
logger2.debug('Debug log 3'); // LOGGER 2

const logs1 = logger1
                .from(moment().subtract(6, 'seconds'))
                .to(moment().subtract(4, 'seconds'))
                .level(LoggerageLevel.INFO)
                .version('1.0') // this is not necessary in this case, but don't care
                .getLog();

// [logs1] include only 'Info log 1' and 'Info log 2' logs

logger2.from(moment().subtract(2, 'second')).getLogAsync(function(err, logs2) {
  // It's asynchronous just to see that it works with this method too

  // [logs2] include only 'Debug log 2', 'Info log 2' and 'Debug log 3' logs
  // include one log of 'logger1' because the two use the same app name, use the default localStorage and no is filtered by version
});
</code></pre></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../..';
    </script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
    <script src="../../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
